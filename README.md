# Urban_Sleep_disorder_Analysis

## 1. Project Introduction
**프로젝트 명: 도시는 잠들지 못한다**  
**purpose**  
도시의 환경적 특성과 생활양식이 시민의 수면 건강에 어떤 영향을 미치는지를 분석하고자 한다.  
특히, 도시화·소음·생활 패턴 등의 외부 요인이 수면장애 발생에 미치는 상관관계를 데이터 기반으로 탐색한다.  
**KeyWord**  
수면장애, 도시환경, 야간소음, 야식, 유흥시설, 활동량, 공시지가, 도시화


## 2. Data

### 2-a. Variable Definitions & Hypotheses
| Variable        | description                           | Hypotheses                         |
| ---------- | ----------------------------------- | --------------------------------------- |
| **야식 섭취**  | 야간 시간대(20\~06시) 배달 결제 빈도 및 평균 주문 금액 | 야식을 많이 섭취하는 지역일수록 수면장애 발생률이 높을 것이다.     |
| **112 신고** | 지역 내 112 신고 건수 (총신고수)               | 112 신고가 자주 발생하는 지역일수록 수면장애 발생률이 높을 것이다. |
| **활동량**    | 공공체육시설 수 대비 인구수 (인당 체육시설 수)         | 활동량이 많은 지역일수록 수면장애 발생률이 낮을 것이다.         |
| **교통량**    | 22시\~06시 차량 유입량 평균                  | 야간 교통량이 많은 지역일수록 수면장애 발생률이 높을 것이다.      |
| **유흥시설**   | 시군구별 유흥업소 수                         | 유흥시설이 밀집된 지역일수록 수면장애 발생률이 높을 것이다.       |
| **공시지가**   | 시군구별 평균 공시지가 (원/㎡)                  | 공시지가가 높은 지역일수록 수면장애 발생률이 낮을 것이다.        |

### 2-b. data source
| Variable  | Raw Dataset   | link |  file | provider  |
| ------ | ----------- | ------------ | --------------- | ------------ |
| 수면장애| 국민건강보험공단\_수면장애 관련 주상병별 진료정보 | [바로가기](https://www.data.go.kr/data/15124322/fileData.do)  | 국민건강보험공단\_수면장애 관련 주상병별 진료정보\_20231231    | 국민건강보험공단  |
| 야식 섭취| 주문 지역 인구 특성 + 지역-업종 결제정보 | [바로가기](https://bdp.kt.co.kr/invoke/SOKBP2603/?goodsCode=KGUPOPLTNINFO), [바로가기](https://bdp.kt.co.kr/invoke/SOKBP2603/?goodsCode=KGUDSTNORDER) | KGU\_2nd\_, KGU\_3rd\_    | 경기대학교 빅데이터센터 |
| 112 신고 | 신고 빈발지 데이터  | [바로가기](https://www.bigdata-policing.kr/product/view?product_id=PRDT_500)   | 범죄 빈발지 데이터 2020  | 경찰청  |
| 활동량 | 지역별공공체육시설보급현황정보  | [바로가기](https://www.bigdata-culture.kr/bigdata/user/data_market/detail.do?id=67f6b0e0-2594-11eb-af9a-4b03f0a582d6)  | 지역별공공체육시설보급현황정보(202407)   | 국민체육진흥공단  |
| 교통량 | 서울시 교통량 정보   | [바로가기](http://data.seoul.go.kr/dataList/OA-15064/F/1/datasetView.do)   | 2020 서울특별시 교통량 조사자료 | 서울특별시  |
| 유흥시설 | 유흥주점영업 인허가 정보 | [바로가기](https://www.data.go.kr/data/15045018/fileData.do), [바로가기](http://data.seoul.go.kr/dataList/OA-16090/S/1/datasetView.do)   | 행안부\_유흥업소\_20240302, 서울시\_유흥업소\_20200715 | 행정안전부, 서울특별시 |
| 공시지가 | 국토교통부\_표준지공시지가  | [바로가기](https://www.data.go.kr/data/15004246/fileData.do) | 국토교통부\_표준지공시지가\_20240101  | 국토교통부|

## 3. Data Analysis
### 3-a. preprocessing

#### Common rules

- 지역: 서울특별시, 경기도, 인천광역시  
- 기간: 주로 2021년 (일부 2020, 2024 포함)  
- 지역 정제:
  - `시군구2` 컬럼 생성 (`중구` → `서울중구`)  
  - 경기/인천 동일 시 단위 → 평균 처리  
  - 중복 제거: `drop_duplicates`  
- 병합 기준 컬럼: `시군구2`

---

#### Variables

##### 💤 수면장애  
- 1차 가공: `수면장애.ipynb`  
- 연도: 2021  
- 필터: `주상병명 == '비기질성 수면장애'`  
- 변수: `시군구`, `진료인원(명)`  
- 처리: `시군구2` 생성 및 정제

##### 🍔 야식 섭취  
1. `배달_주거특성_빈도.ipynb`  
   - 연도: 2020  
   - 변수: `세대구성대분류명`, `빈도`  
   - 처리: 피벗 → 수치 변환 → 평균 산출

2. `배달_평균주문금액.ipynb`  
   - 연도: 2021  
   - 변수: `평균주문금액`  
   - 처리: 20시~06시 필터 → 날짜·시간 제거 → 평균 계산

##### 🏙️ 유흥시설  
- 1차 가공: `인천경기_유흥업소.ipynb` (서울: 원본 사용)  
- 연도: 2024  
- 변수: 유흥업소 수  
- 처리: 시군구별 카운트 → `시군구2` 정제

##### 🏃 활동량  
- 1차 가공: `활동량.ipynb`  
- 연도: 2020년 9월  
- 변수: `시설수`, `인구수`  
- 파생: `인당시설수 = 시설수 / 인구수`  
- 처리: `시군구2` 기준 정리

##### 💸 공시지가  
- 1차 가공: `공시지가.ipynb`  
- 연도: 2024년 1월  
- 변수: `공시지가`  
- 처리: 평균 산출 → `시군구2` 정제

##### 🚔 112 신고  
- 1차 처리: 없음(원본 CSV 사용)
- 연도: 2020  
- 변수: `총신고수`  
- 처리: 컬럼 필터링 → `시군구2` 정제

##### 🚗 교통량  
- 1차 처리: 원본 데이터 필터링  
- 연도: 2020  
- 변수: `유입 교통량`, `시간대`  
- 처리: 22시~06시 평균 추출 → `시군구2` 정제

---
#### Merge
- 병합 기준: `시군구2`  
- 기준 데이터: 수면장애  
- 방식: `left join`  
- 결측치 처리: 평균값 보간 또는 삭제  
- 결과: `67개 지역 × 19개 변수` 병합 테이블 (`파일병합_최종.ipynb`)


### 3.b. EDA

## 4. ML
### 4.a. ML preprocessing
- 기존 타겟인 '비기질성 수면장애'는 연도 데이터 부족으로 예측 분석에 한계  
- '불면증(정신질환 진료현황)' 데이터를 타겟 변수로 재설정  
- 기존 EDA에서 유의미한 상관관계를 보인 변수 중 다년치 확보 가능한 항목(야식 섭취, 범죄)을 설명 변수로 사용  
- 공통 전처리와 동일한 지역 처리 방식(`시군구2`) 적용

#### Target 
- 변수: 불면증 진료 인원  
- 사용 연도: 2019 ~ 2022  
- 처리 방식: 4개년 데이터를 행 단위로 통합

#### Features
1. 야식 섭취  
   - 데이터/변수: 주문 지역 인구 특성 / 배달 빈도  
   - 사용 연도: 2017 ~ 2020

2. 112 신고  
   - 데이터/변수: 신고 빈발지 데이터 / 총 신고수  
   - 사용 연도: 2019 ~ 2023  
   - 처리 방식: 연도별 데이터 통합

#### Preprocessing file
`머신러닝 데이터.ipynb`



### 4.b. ML model
## 5. insight


